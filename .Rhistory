?pr_convert
??pr_convert
remotes::install_github("irea-cnr-mi/prismaread")
library(remotes)
library(rgdal)
library(prismaread)
in_file  <-  "//10.0.1.243/nr_data/3_rs_data/PRISMA/JDS/2025/L1/PRS_L1_STD_OFFL_20250424/PRS_L1_STD_OFFL_20250424100426_20250424100430_0001.he5"
out_folder  <-  "//10.0.1.243/nr_data/3_rs_data/PRISMA/JDS/2025/L1/PRS_L1_STD_OFFL_20250424/"
pr_convert(
in_file = in_file,
out_folder = out_folder,
out_format = "GTiff",
base_georef = F,
VNIR = F,
SWIR = F,
FULL = F,
ANGLES = F,
fill_gaps = TRUE,
source = "HCO",
join_priority = "SWIR",
LATLON = F,
PAN = F,
CLOUD = F,
overwrite = T,
ATCOR = T
)
library(remotes)
library(rgdal)
library(prismaread)
in_file  <-  "//10.0.1.243/nr_data/3_rs_data/PRISMA/JDS/2023/L2C/PRS_L2C_STD_20230304102047_20230304102051_0001/PRS_L2C_STD_20230304102047_20230304102051_0001.he5"
out_folder  <-  "//10.0.1.243/nr_data/3_rs_data/PRISMA/JDS/2023/L2C/PRS_L2C_STD_20230304102047_20230304102051_0001/"
pr_convert(
in_file = in_file,
out_folder = out_folder,
out_format = "GTiff",
base_georef = T,
VNIR = T,
SWIR = T,
FULL = T,
ANGLES = T,
fill_gaps = TRUE,
source = "HCO",
join_priority = "SWIR",
LATLON = T,
PAN = T,
CLOUD = T,
overwrite = T,
ATCOR = F
)
library(remotes)
library(rgdal)
library(prismaread)
in_file  <-  "//10.0.1.243/nr_data/3_rs_data/PRISMA/JDS/2023/L2C/PRS_L2C_STD_20230304102047_20230304102051_0001/PRS_L2C_STD_20230304102047_20230304102051_0001.he5"
out_folder  <-  "//10.0.1.243/nr_data/3_rs_data/PRISMA/JDS/2023/L2C/PRS_L2C_STD_20230304102047_20230304102051_0001/"
pr_convert(
in_file = in_file,
out_folder = out_folder,
out_format = "GTiff",
base_georef = T,
VNIR = T,
SWIR = T,
FULL = T,
ANGLES = T,
fill_gaps = TRUE,
source = "HCO",
join_priority = "SWIR",
LATLON = T,
PAN = T,
overwrite = T,
ATCOR = F
)
#designed in Jun 2025
#author: Emanuele Spirito
#site: CNR-IREA-MI
library(prismaread)
in_file  <-  "//10.0.1.243/nr_data/3_rs_data/PRISMA/JDS/2023/L2C/PRS_L2C_STD_20230304102047_20230304102051_0001/PRS_L2C_STD_20230304102047_20230304102051_0001.he5"
out_folder  <-  dirname(in_file)
out_folder
?dirname
file.path(in_file)
dirname(file.path(in_file))
setwd(out_folder)
dir.create(paste0(out_folder,"/prova"))
dir.create(paste0(out_folder,"/prova/"))
?gsub
out_folder <- gsub('\\','/',out_folder)
out_folder <- gsub('\\','/',out_folder)
?strsplit
strsplit(in_file)
strsplit(in_file,"/")
strsplit(in_file,"/")[-1]
str <- strsplit(in_file,"/")
str[-1]
str[,1:10]
View(str)
str[1]
str[[1]]
str[[1]][1:10]
str[[1]][-1]
str[[1]][-2]
str[[1]][-1][-2]
strsplit
basename(in_file)
strsplit(basename(in_file),"PRS_")
filename <- basename(in_file)
substring(basename(in_file),3,5)
substring(basename(in_file),5,8)
substring(basename(in_file),5,7)
filename <- substring(basename(in_file),5,7)
if(filename == "L2C"){
print(T)
}
product_type <- substring(basename(in_file),5,6)
product_type
in_file  <-  "//10.0.1.243/nr_data/3_rs_data/PRISMA/JDS/2023/L2C/PRS_L2C_STD_20230304102047_20230304102051_0001/PRS_L1_STD_20230304102047_20230304102051_0001.he5"
out_folder  <-  "//10.0.1.243/nr_data/3_rs_data/PRISMA/JDS/2023/L2C/PRS_L2C_STD_20230304102047_20230304102051_0001/"
product_type <- substring(basename(in_file),5,6)
Sys.which("python")
install.packages("reticulate")
######################################################################
#change CRS ----
######################################################################
python_path <- "C:\Users\Emanuele\anaconda3\envs\prisveg_giando1\python.exe"
reticulate::use_python(python_path)
######################################################################
#change CRS ----
######################################################################
python_path <- "C:\Users\Emanuele\anaconda3\envs\prisveg_giando1\python.exe"
######################################################################
#change CRS ----
######################################################################
python_path <- "C:/Users/Emanuele/anaconda3/envs/prisveg_giando1/python.exe"
reticulate::use_python(python_path)
env_path <-
reticulate::use_condaenv("prisveg_giando1")
env_path <-
reticulate::use_condaenv("C:/Users/Emanuele/anaconda3/envs/prisveg_giando1/")
condaenv_path <- dirname(python_path)
reticulate::use_condaenv(condaenv_path)
condaenv_path <- paste0(dirname(python_path),"/")
reticulate::use_condaenv(condaenv_path)
dir.exists(condaenv_path)
source_python("prs_cld_crs_L1.py")
?source_python
reticulate::source_python("prs_cld_crs_L1.py")
in_file  <-  "//10.0.1.243/nr_data/3_rs_data/PRISMA/JDS/2025/L1/prove_per_pacchetto/PRS_L1_STD_OFFL_20250424100426_20250424100430_0001.he5"
out_folder  <-  "//10.0.1.243/nr_data/3_rs_data/PRISMA/JDS/2025/L1/prove_per_pacchetto/"
product_type <- substring(basename(in_file),5,6)
######################################################################
#prismaread ----
######################################################################
if(product_type == "L1"){
CLOUD <- T
ATCOR <- T
}
if(product_type == "L2"){
CLOUD <- F
ATCOR <- F
}
prismaread::pr_convert(
in_file = in_file,
out_folder = out_folder,
out_format = "GTiff",
base_georef = T,
VNIR = T,
SWIR = T,
FULL = T,
ANGLES = T,
fill_gaps = T,
source = "HCO",
join_priority = "SWIR",
LATLON = T,
PAN = T,
CLOUD = CLOUD,
overwrite = T,
ATCOR = ATCOR
)
prs_cld_crs(paste0(out_folder,gsub(".he5","_HCO_FULL.tif",basename(in_file))),
s2_file)
s2_file <- "//10.0.1.243/nr_data/3_rs_data/PRISMA/JDS/2025/L1/prove_per_pacchetto/S2_20250422T101051_B08_T32TQQ_ritagliato_coordinate.tif"
prs_cld_crs(paste0(out_folder,gsub(".he5","_HCO_FULL.tif",basename(in_file))),
s2_file)
here()
library(here)
here()
here("prs_cld")
reticulate::source_python(here("prs_cld_crs_L1.py"))
prs_cld_crs(paste0(out_folder,gsub(".he5","_HCO_FULL.tif",basename(in_file))),
s2_file)
reticulate::conda_list()
reticulate::use_condaenv(condaenv_path)
reticulate::use_python(python_path)
######################################################################
#python settings ----
######################################################################
python_path <- "C:/Users/Emanuele/anaconda3/envs/prisveg_giando1/python.exe"
condaenv_path <- paste0(dirname(python_path),"/")
reticulate::use_python(python_path)
reticulate::use_python(python_path)
reticulate::import("pandas")
######################################################################
#python settings ----
######################################################################
python_path <- "C:/Users/Emanuele/anaconda3/envs/prisveg_giando1/python.exe"
condaenv_path <- paste0(dirname(python_path),"/")
reticulate::use_python(python_path)
use_python
in_file  <-  "//10.0.1.243/nr_data/3_rs_data/PRISMA/JDS/2025/L1/prove_per_pacchetto/PRS_L1_STD_OFFL_20250424100426_20250424100430_0001.he5"
out_folder  <-  "//10.0.1.243/nr_data/3_rs_data/PRISMA/JDS/2025/L1/prove_per_pacchetto/"
s2_file <- "//10.0.1.243/nr_data/3_rs_data/PRISMA/JDS/2025/L1/prove_per_pacchetto/S2_20250422T101051_B08_T32TQQ_ritagliato_coordinate.tif"
product_type <- substring(basename(in_file),5,6)
in_file  <-  "//10.0.1.243/nr_data/3_rs_data/PRISMA/JDS/2025/L1/prove_per_pacchetto/PRS_L1_STD_OFFL_20250424100426_20250424100430_0001.he5"
out_folder  <-  "//10.0.1.243/nr_data/3_rs_data/PRISMA/JDS/2025/L1/prove_per_pacchetto/"
s2_file <- "//10.0.1.243/nr_data/3_rs_data/PRISMA/JDS/2025/L1/prove_per_pacchetto/S2_20250422T101051_B08_T32TQQ_ritagliato_coordinate.tif"
product_type <- substring(basename(in_file),5,6)
######################################################################
#python settings ----
######################################################################
python_path <- "C:/Users/Emanuele/anaconda3/envs/prisveg_giando1/python.exe"
condaenv_path <- paste0(dirname(python_path),"/")
reticulate::use_python(python_path)
reticulate::use_python("C:/Users/Emanuele/anaconda3/envs/prisveg_giando1/python.exe")
reticulate::use_python("C:/Users/Emanuele/anaconda3/envs/prisveg_giando1/python.exe")
reticulate::use_python()
?reticulate::use_python
reticulate::use_condaenv(condaenv_path)
reticulate::use_condaenv("C:/Users/Emanuele/anaconda3/envs/prisveg_giando1/")
reticulate::use_condaenv("C:\Users\Emanuele\anaconda3\envs\prisveg_giando1")
/
reticulate::use_condaenv("C:/Users/Emanuele/anaconda3/envs/prisveg_giando1/")
reticulate::use_python("C:/Users/Emanuele/anaconda3/envs/prisveg_giando1/python.exe")
reticulate::use_python("C:/Users/Emanuele/anaconda3/envs/prisveg_giando1/python.exe", T)
reticulate::use_python("C:/Users/Emanuele/anaconda3/envs/prisveg_giando1/python.exe", T)
reticulate::use_condaenv("C:/Users/Emanuele/anaconda3/envs/prisveg_giando1/")
reticulate::source_python(here("prs_cld_crs_L1.py"))
library(here)
dir.create(here("/prova/"))
dir.create(here("prova/"))
prs_cld_crs(paste0(out_folder,gsub(".he5","_HCO_FULL.tif",basename(in_file))),
s2_file)
######################################################################
#python settings ----
######################################################################
use_virtualenv("prisveg_giando1")
library(reticulate)
######################################################################
#python settings ----
######################################################################
use_virtualenv("prisveg_giando1")
py_eval("1+1")
######################################################################
#python settings ----
######################################################################
use_condaenv("prisveg_giando1")
######################################################################
#python settings ----
######################################################################
use_condaenv(condaenv = "prisveg_giando1", conda = "C:/Users/Emanuele/anaconda3/envs/prisveg_giando1")
######################################################################
#python settings ----
######################################################################
use_condaenv(condaenv = "prisveg_giando1", conda = "C:/Users/Emanuele/Anaconda3/condabin/conda.bat")
?use_condaenv
######################################################################
#python settings ----
######################################################################
use_condaenv(condaenv = "C:/Users/Emanuele/anaconda3/envs/prisveg_giando1",
conda = "C:/Users/Emanuele/Anaconda3/condabin/conda.bat")
######################################################################
#python settings ----
######################################################################
reticulate::use_condaenv(condaenv = "C:/Users/Emanuele/anaconda3/envs/prisveg_giando1",
conda = "C:/Users/Emanuele/Anaconda3/condabin/conda.bat")
reticulate::py_config()
reticulate::source_python(here::here("prs_cld_crs_L1.py"))
prs_cld_crs(paste0(out_folder,gsub(".he5","_HCO_FULL.tif",basename(in_file))),
s2_file)
reticulate::py_last_error()
reticulate::import(pandas)
reticulate::conda_list
reticulate::conda_list()
######################################################################
#python settings ----
######################################################################
reticulate::use_condaenv(condaenv = "C:/Users/Emanuele/anaconda3/envs/prisveg_giando1",
conda = "C:/Users/Emanuele/Anaconda3/condabin/conda.bat")
######################################################################
#python settings ----
######################################################################
reticulate::use_condaenv(condaenv = "C:/Users/Emanuele/anaconda3/envs/prisveg_giando1",
conda = "C:/Users/Emanuele/Anaconda3/condabin/conda.bat")
######################################################################
#python settings ----
######################################################################
reticulate::use_condaenv(condaenv = "C:/Users/Emanuele/anaconda3/envs/prisveg_giando1",
conda = "C:/Users/Emanuele/Anaconda3/condabin/conda.bat")
######################################################################
#python settings ----
######################################################################
reticulate::use_condaenv(condaenv = "C:/Users/Emanuele/anaconda3/envs/prisveg_giando1/python.exe",
conda = "C:/Users/Emanuele/Anaconda3/condabin/conda.bat")
reticulate::import(pandas)
py_eval("1+1")
reticulate::py_eval("1+1")
reticulate::py_eval("1+2")
reticulate::import(pandas)
reticulate::py_eval("1+2")
######################################################################
#python settings ----
######################################################################
reticulate::use_condaenv(condaenv = "C:/Users/Emanuele/anaconda3/envs/prisveg_giando1/python.exe",
conda = "C:/Users/Emanuele/Anaconda3/condabin/conda.bat")
?conda_install
######################################################################
#python settings ----
######################################################################
reticulate::conda_create(envname = "Rconda")
reticulate::conda_install(envname = "Rconda",
packages = c("gdal==3.6.1","arosics","rasterio"),
python_version = "3.8.20")
reticulate::conda_list()
reticulate::conda_list("Rcobda")
reticulate::conda_list("Rconda")
reticulate::install_miniconda()
reticulate::install_miniconda()
renv::init()
install.packages("renv")
Sys.setenv(RENV_PATHS_CACHE = here('work/my_project/renv/cache'))
Sys.setenv(RENV_PATHS_CACHE = here::here('work/my_project/renv/cache'))
renv::use_python(type = 'conda', name = 'prisveg_giando1')
######################################################################
#python settings ----
######################################################################
library(reticulate)
library(here)
?miniconda
??miniconda
miniconda_path()
??miniconda-params
??miniconda
?conda_create
conda_binary()
miniconda_python_version()
reticulate::conda_create(envname = "Rconda",
conda = reticulate::conda_binary(),
packages = c("gdal==3.6.1","arosics","rasterio"),
python_version = "3.8.20")
reticulate::conda_binary()#to check conda path
prs_cld_crs(paste0(out_folder,gsub(".he5","_HCO_FULL.tif",basename(in_file))),
s2_file)
reticulate::source_python(here::here("prs_cld_crs_L1.py"))
prs_cld_crs(paste0(out_folder,gsub(".he5","_HCO_FULL.tif",basename(in_file))),
s2_file)
out_folder  <-  "//10.0.1.243/nr_data/3_rs_data/PRISMA/JDS/2025/L1/prove_per_pacchetto/"
in_file  <-  "//10.0.1.243/nr_data/3_rs_data/PRISMA/JDS/2025/L1/prove_per_pacchetto/PRS_L1_STD_OFFL_20250424100426_20250424100430_0001.he5"
out_folder  <-  "//10.0.1.243/nr_data/3_rs_data/PRISMA/JDS/2025/L1/prove_per_pacchetto/"
s2_file <- "//10.0.1.243/nr_data/3_rs_data/PRISMA/JDS/2025/L1/prove_per_pacchetto/S2_20250422T101051_B08_T32TQQ_ritagliato_coordinate.tif"
product_type <- substring(basename(in_file),5,6)
prs_cld_crs(paste0(out_folder,gsub(".he5","_HCO_FULL.tif",basename(in_file))),
s2_file)
conda_list(conda = reticulate::conda+)
conda_list(conda = reticulate::conda_binary())
reticulate::conda_create(envname = "r-miniconda",
conda = reticulate::conda_binary(),
packages = c("gdal==3.6.1","arosics","rasterio"),
python_version = "3.8.20")
reticulate::conda_create(envname = "r-miniconda",
conda = "C:/Users/Emanuele/AppData/Local/r-miniconda/condabin/conda.bat",
packages = c("gdal==3.6.1","arosics","rasterio"),
python_version = "3.8.20")
reticulate::source_python(here::here("prs_cld_crs_L1.py"))
prs_cld_crs(paste0(out_folder,gsub(".he5","_HCO_FULL.tif",basename(in_file))),
s2_file)
repl_python
repl_python()
py_config()
?py_require
py_require(python_version = "3.8.20")
py_config()
reticulate::py_config()
